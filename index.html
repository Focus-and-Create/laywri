<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Layer Writing - 깔끔한 버전</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Serif+4:opsz,wght@8..60,400;500;600&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@300;400;500" rel="stylesheet"/>
  <link href="styles.css" rel="stylesheet"/>
</head>
<body>

  <!-- 로그인 화면 -->
  <div class="screen" id="loginScreen">
    <div class="login-container">
      <div class="login-card">
        <div class="login-logo">
          <div class="logo-icon"><span class="material-symbols-outlined">layers</span></div>
          <h1>LayWri</h1>
          <p class="login-subtitle">레이어 글쓰기</p>
        </div>

        <form class="login-form" id="loginForm" autocomplete="off">
          <div class="login-field">
            <label for="loginUsername">아이디</label>
            <input type="text" id="loginUsername" placeholder="아이디를 입력하세요" autocomplete="username"/>
          </div>
          <div class="login-field">
            <label for="loginPassword">비밀번호</label>
            <input type="password" id="loginPassword" placeholder="비밀번호를 입력하세요" autocomplete="current-password"/>
          </div>
          <div class="login-error hidden" id="loginError"></div>
          <button type="submit" class="login-btn">로그인</button>
        </form>

        <div class="login-divider"><span>또는</span></div>

        <form class="login-form hidden" id="registerForm" autocomplete="off">
          <div class="login-field">
            <label for="registerUsername">새 아이디</label>
            <input type="text" id="registerUsername" placeholder="사용할 아이디 (2자 이상)" autocomplete="username"/>
          </div>
          <div class="login-field">
            <label for="registerPassword">비밀번호</label>
            <input type="password" id="registerPassword" placeholder="비밀번호 (6자 이상)" autocomplete="new-password"/>
          </div>
          <div class="login-field">
            <label for="registerPasswordConfirm">비밀번호 확인</label>
            <input type="password" id="registerPasswordConfirm" placeholder="비밀번호를 다시 입력하세요" autocomplete="new-password"/>
          </div>
          <div class="register-error hidden" id="registerError"></div>
          <button type="submit" class="login-btn">계정 만들기</button>
        </form>

        <button class="toggle-auth-btn" id="toggleAuthBtn">계정이 없으신가요? 회원가입</button>
      </div>
    </div>
  </div>

  <div class="screen hidden" id="listScreen">
    <header class="list-header">
      <div class="list-header-left">
        <div class="logo-icon"><span class="material-symbols-outlined">layers</span></div>
        <h1 id="appTitle">내 원고 보관함</h1>
      </div>
      <div class="header-right-group">
        <span class="current-user-badge" id="currentUser"></span>
        <button class="settings-btn" id="settingsBtn"><span class="material-symbols-outlined">settings</span></button>
        <button class="logout-btn" id="logoutBtn" title="로그아웃"><span class="material-symbols-outlined">logout</span></button>
      </div>
    </header>

    <main class="list-main">
      <aside class="list-sidebar" id="categorySidebar">
        <div class="sidebar-section">
          <div class="sidebar-label" id="categoryLabel">카테고리</div>
          <div class="category-list" id="categoryList"></div>
          <button class="category-add-btn" id="addCategoryBtn">
            <span class="material-symbols-outlined">add</span>
            <span id="addCategoryText">추가</span>
          </button>
        </div>
      </aside>
      <div class="list-content">
        <div class="list-toolbar">
          <div class="view-toggle-group">
            <button class="view-toggle-btn active" id="cardViewBtn" title="카드 뷰">
              <span class="material-symbols-outlined">grid_view</span>
            </button>
            <button class="view-toggle-btn" id="listViewBtn" title="목록 뷰">
              <span class="material-symbols-outlined">view_list</span>
            </button>
          </div>
          <div class="sort-group">
            <span class="material-symbols-outlined sort-icon">sort</span>
            <select class="sort-select" id="sortSelect">
              <option value="newest">최신순</option>
              <option value="oldest">오래된순</option>
              <option value="title">이름순</option>
            </select>
          </div>
        </div>
        <div class="memo-grid" id="memoList"></div>
      </div>
    </main>

    <div class="fab-container">
      <button class="fab-btn" id="newMemoFab">
        <span class="material-symbols-outlined">add</span>
        <span class="fab-text">새 원고 작성</span>
      </button>
    </div>
  </div>

  <div class="screen hidden" id="editorScreen">
    <header class="editor-header">
      <div class="header-content">
        <button class="back-btn" id="backBtn"><span class="material-symbols-outlined">arrow_back</span></button>
        <div class="title-area">
          <input class="memo-title-input" id="memoTitle" placeholder="제목 없는 원고" type="text"/>
          <span class="save-status" id="saveStatus">자동 저장됨</span>
        </div>
      </div>
    </header>

    <main class="editor-main">
      <div class="editor-wrapper">
        <div class="editor-canvas">
          <div class="editor" contenteditable="true" id="editor" data-placeholder="이곳에 이야기를 시작하세요..."></div>
          <div class="editor-spacer"></div>
        </div>
      </div>
    </main>

    <div class="floating-hud" id="format-toolbar">
      <button class="toolbar-btn" id="boldBtn"><span class="material-symbols-outlined">format_bold</span></button>
      <button class="toolbar-btn" id="italicBtn"><span class="material-symbols-outlined">format_italic</span></button>
      <button class="toolbar-btn" id="underlineBtn"><span class="material-symbols-outlined">format_underlined</span></button>
      <button class="toolbar-btn" id="strikeBtn"><span class="material-symbols-outlined">strikethrough_s</span></button>
      <div class="hud-divider"></div>
      <button class="toolbar-btn" id="alignLeftBtn"><span class="material-symbols-outlined">format_align_left</span></button>
      <button class="toolbar-btn" id="alignCenterBtn"><span class="material-symbols-outlined">format_align_center</span></button>
      <button class="toolbar-btn" id="alignRightBtn"><span class="material-symbols-outlined">format_align_right</span></button>
      <button class="toolbar-btn" id="alignJustifyBtn"><span class="material-symbols-outlined">format_align_justify</span></button>
      <div class="hud-divider"></div>
      <button class="toolbar-btn" id="bulletListBtn"><span class="material-symbols-outlined">format_list_bulleted</span></button>
      <button class="toolbar-btn" id="numberListBtn"><span class="material-symbols-outlined">format_list_numbered</span></button>
      <div class="hud-divider"></div>
      <button class="toolbar-btn" id="undoBtn"><span class="material-symbols-outlined">undo</span></button>
      <button class="toolbar-btn" id="redoBtn"><span class="material-symbols-outlined">redo</span></button>
      <div class="hud-divider"></div>
      <button class="toolbar-btn" id="layerPanelToggle"><span class="material-symbols-outlined">layers</span></button>
    </div>

    <aside class="layer-panel-glass" id="floatingPanel">
      <div class="panel-header" id="panelHeader">
        <span class="panel-label">레이어 스택</span>
        <button class="add-layer-mini" id="addLayerBtn"><span class="material-symbols-outlined">add</span></button>
        <button class="panel-close-btn" id="panelClose"><span class="material-symbols-outlined">close</span></button>
      </div>
      <div class="panel-body" id="layerList">
        </div>
    </aside>

    <footer class="editor-status">
      <div class="status-group">
        <span><span id="charLabel">글자 수: </span><b id="charCount">0</b></span>
        <span><span id="wordLabel">단어 수: </span><b id="wordCount">0</b></span>
      </div>
    </footer>
  </div>

  <div class="context-menu hidden" id="layerContextMenu">
    <div id="contextMenuItems"></div>
  </div>

  <!-- 레이어 색상/모드 팝업 -->
  <div class="layer-color-popup hidden" id="layerColorPopup">
    <div class="popup-color-row">
      <div class="popup-color-picker-wrap">
        <div class="popup-color-preview" id="popupColorPreview"></div>
        <input type="color" id="popupColorPicker"/>
      </div>
      <span class="popup-color-label" id="popupColorLabel">색상</span>
    </div>
    <div class="popup-mode-label" id="popupModeLabel">표시 방식</div>
    <div class="popup-mode-btns">
      <button class="popup-mode-btn" data-mode="highlight" id="popupModeHighlight">배경색</button>
      <button class="popup-mode-btn" data-mode="text" id="popupModeText">글자색</button>
      <button class="popup-mode-btn" data-mode="off" id="popupModeOff">끄기</button>
    </div>
  </div>

  <div class="modal-overlay hidden" id="settingsModal">
    <div class="modal-content">
      <h2 id="settingsTitle">설정</h2>
      <div class="settings-row">
        <label id="langLabel">언어</label>
        <select id="langSelect">
          <option value="ko">한국어</option>
          <option value="en">English</option>
        </select>
      </div>
      <button class="modal-close-btn" id="settingsClose"><span>닫기</span></button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>